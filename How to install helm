17  wget https://get.helm.sh/helm-v3.10.3-linux-amd64.tar.gz
   18  ls
   19  tar zxvf helm-v3.10.3-linux-amd64.tar.gz
   20  cd linux-amd64/
   21  ls
   22  cp helm /usr/bin
   23  cd /root
   24  helm
   25  history
   26  helm list
   
   ###we will create a directory structure for your helm chart
    30  mkdir charts
   31  cd charts/
   32  mkdir my-nginx
   33  cd my-nginx/
   35  apt install tree
   36  tree
###lets create chart.yaml file and provide information about the chart
nano Chart.yml
###inside chart.yml all the following information
apiVersion: v1
name: my-nginx
version: 0.1.0
appVersion: 1.0
description: this is my first helm chart
###lets create the template file and do a dry run 
 42  mkdir templates
   43  tree
  45  kubectl create deploy my-nginx --image=nginx -oyaml --dry-run=client
  #dry run and store the result in template directory
   50  kubectl create deploy my-nginx --image=nginx -oyaml --dry-run=client > ./templates/deployment.yml
   51  tree
###how to upgrade the chart
 67  kubectl expose deploy my-nginx --port 80 -oyaml --dry-run=client > ./templates/service.yml
   68  tree
   69  helm list
   ##3now we need to upgrade the chart
   71  helm upgrade my-nginx .
   ###rollback feature in helm chart
    74  helm rollback my-nginx 1
   75  helm rollback my-nginx 2

###values.yml
vi values.yml
####inside the above mentioned file 
replicaCount: 1
###how to refer the values.yml in my template folder inside deplyoment.yml
vi ./templates/deployment.yml
###modify the replicacount 
spec:
  replicas: {{.Values.replicaCount}}
  selector:
    matchLabels:
      app: my-nginx
####modify the values.yml
vi values.yml
replicaCount: 1
service:
        type: NodePort

###inside service.yml
vi ./templates/service.yml
###below spec add this
spec:
  type: {{.Values.service.type}}
  ports:
  - port: 80
###how to change the service type
 90  helm upgrade my-nginx . --set service.type=NodePort
   91  helm upgrade my-nginx . --set service.type=ClusterIP
   92  helm upgrade my-nginx . --set service.type=LoadBalancer
   93  helm upgrade my-nginx . --set service.type=ClusterIP
